spring:
    application:
        name: rdm-platform-api

    datasource:
        url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:rdm_platform}?stringtype=unspecified
        username: ${DB_USER:postgres}
        password: ${DB_PASSWORD:postgres}
        driver-class-name: org.postgresql.Driver
        hikari:
            maximum-pool-size: 20
            minimum-idle: 5
            connection-timeout: 30000
            idle-timeout: 600000
            max-lifetime: 1800000

    jpa:
        database-platform: org.hibernate.dialect.PostgreSQLDialect
        hibernate:
            ddl-auto: none
            naming:
                physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
        show-sql: true
        properties:
            hibernate:
                default_schema: app
                format_sql: true
                use_sql_comments: true
                jdbc:
                    batch_size: 20
                order_inserts: true
                order_updates: true

    security:
        jwt:
            secret: ${JWT_SECRET:e813dd4fc06b5cd6c84a721f1dc360427af620e85326690cba39fee0f837c406}
            expiration: ${JWT_EXPIRATION:604800000} # 7 days in milliseconds

server:
    port: ${SERVER_PORT:8080}

logging:
    level:
        com.rdm: ${LOG_LEVEL:INFO}
        org.springframework.security: ${LOG_SECURITY_LEVEL:WARN}
        org.hibernate.SQL: ${LOG_SQL_LEVEL:OFF}
        org.hibernate.type.descriptor.sql.BasicBinder: ${LOG_SQL_LEVEL:OFF}

springdoc:
    api-docs:
        path: /api-docs
    swagger-ui:
        path: /swagger-ui.html
        tags-sorter: alpha
        operations-sorter: alpha

guacamole:
    url: ${GUACAMOLE_URL:http://localhost/guacamole}
    service-account: ${GUACAMOLE_SERVICE_ACCOUNT:rdm-service}

management:
    endpoints:
        web:
            exposure:
                include: health,info
    endpoint:
        health:
            show-details: when-authorized
